---
title: Нестандартная сортировка
date: 2019-11-25
image: images/blog/art_009_foto.jpg
author: Smile
---

> *Рвав-рвав, собака Смайл опять с вами!*
>
> *Есть просто отличная новость: любопытный пес изыскал возможность вложенной сортировки данных, несмотря на то, что сортировка возможна как бы по одному столбцу...*

**Пример:**

Имеется набор данных следующего вида: 

-- оборудование и порядковый номер для его сортировки;

-- устройства и порядковый номер для их сортировки.

![art_009_screen_1](https://kkadikin.ru/images/blog/art_009_screen_1.jpg)

**Задача:**

На основе представленных данных построить матрицу, в которой на верхнем уровне расположено оборудование, а на нижнем -- соответствующее устройства. При этом и список оборудования, и список устройств должны иметь строго определенный порядок, соответствующий указанному номеру. 

> *Вроде бы, ничего сложного, однако, помимо всего прочего, список устройств для каждого оборудования имеет собственный порядок*

**Возможности сортировки "из коробки":**

**<li>** Используя визуальный элемент "Matrix" ("Матрица"), не применяя при этом сортировку, мы можем получить следующий результат:

![art_009_screen_2](https://kkadikin.ru/images/blog/art_009_screen_2.jpg)

При сборке матрицы, в качестве варианта "по умолчанию", значения в столбце "Оборудование" будут отсортированы по возрастанию (по алфавиту) в качестве варианта "по умолчанию".

**<li>** Используя возможности визуального элемента (см. Дополнительные параметры -> Сортировка по убыванию), мы можем выстроить обратный порядок сортировки, то есть -- по убыванию:

![art_009_screen_3](https://kkadikin.ru/images/blog/art_009_screen_3.jpg)

Правильный порядок сортировки для 1-го уровня уровня матрицы -- "Оборудование" все еще не устрановлен.

**<li>** Используя дополнительные возможности сортировки по столбцу (см. Моделирование -> Сортировать по столбцу), мы можем выстроить правильный порядок сортировки по 1-му уровню матрицы -- "Оборудование":

![art_009_screen_4](https://kkadikin.ru/images/blog/art_009_screen_4.jpg)

Несмотря на достигнутый результат, на этом возможности сортировки в стандартном функционале исчерпываются, и отсортировать 2-ой уровень матрицы -- "Устройства" в правильном порядке не представляется возможным. При попотки применения сортировки по столбцу "Порядок внутри группы" для уровня "Устройства", система выдаст ошибку следующего вида:

![art_009_screen_5](https://kkadikin.ru/images/blog/art_009_screen_5.jpg)

Ошибка связана с тем, что в имена устройств, относящихся к разному оборудованию, дублируются.

**Обходные пути:**

**<li>** Желаемой цели можно добиться, присвоив к имени устройства порядковый номер, тогда название по оборудованию "Главная турбина" "изменится, например, на "1_Камера ГТ", а базовые возможности сортировки по возрастанию обеспечат правильный внутренний порядок элементов.

**<li>** Также можно обеспечить отсутствие дублей в названии устройства, привязав его, например, к оборудованию, то есть изменив на "Датчик ААА_ГТ".

При при\менении обоих этих вариантов дубли названий устраняются, но выглядит это не очень красиво.




> *Рвав-рвав, наша машина времени успешно введена в эксплуатацию, хотя, конечно, смотреть "что у тебя было" -- несколько грустновато...*
>
> *Бегу проверять свои заначки :-)*
>
> *Ваш Смайл*


**ДЛЯ ЛЮБИТЕЛЕЙ ПОНАЖИМАТЬ НА КНОПОЧКИ**

<iframe width="800" height="600" src="https://app.powerbi.com/view?r=eyJrIjoiNWRjYmEzNjYtNDFiYi00NmE5LWFhNjAtOTg0YWIwMzkwZGY1IiwidCI6IjE4YjFiOTZhLTk0MTQtNDE3MC1iNmNhLTZkODU3NTJlNTZmOCIsImMiOjZ9" frameborder="0" allowFullScreen="true"></iframe>