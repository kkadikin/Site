---
title: Собакенские будни - конструкции Related и Lookupvalue
date: 2019-11-04
image: images/blog/blog_009_foto.jpg
author: Smile
---

> *Рвав-рвав, сегодня я -- собака-двередержака!*
>
> *Перед вами -- 2-я заметка из нашего цикла "Собакенские будн", и ниже мы рассмотрим использование таких конструкций, как Related и Lookupvalue. При помощи данных функций можно присоединять данные, содержащиеся в разных таблицах, друг к другу. Прошаренная собака для целей демонстрации будет использовать тотже пример, что и в статье [Собакенские будни - конструкция Switch](https://kkadikin.ru/ru/blog/blog_008/).*


**Пример:**

**<li>** Имеется 2 набора данных, содержащих различную информацию, но при этом в каждом из набоов пристствует уникальный ключ (см. столбец "Питомец"):

![blog_009_screen_1] (https://kkadikin.ru/images/blog/blog_009_screen_1.jpg)

*Кстати, если ключ отсутствует, не опускать хвост ни в коем разе, его всегда можно сделать самостоятельно, лишь бы данные обоих наборов были хоть как-то сопоставимы.*

**Задача:**

Собрать данные из обоих наборов в одном визуальном элементе, например, в элементе "Table" ("Таблица").


**Использование функционала:**

**<li>** Если мы можем связать данные посредством имеющегося ключа, и у нас не стоит задачи объединения данных в одну сущность, то все что необходимо сделать -- это настроить нужную связь на уровне модели:

![blog_009_screen_2] (https://kkadikin.ru/images/blog/blog_009_screen_2.jpg)

**<li>** Дальше уже можно переходить непосредственно к построению визуального элемента, вобщем, проще не бывает:

![blog_009_screen_3] (https://kkadikin.ru/images/blog/blog_009_screen_3.jpg)


**Конструкции Related:**

**<li>** Данная функция работает только при наличии связей между данными, все, что необходимо сделать -- это определиться с базовой таблицей, а затем выбрать нужный столбец из другой таблицы:

Эпитет&nbsp;-&nbsp;со&nbsp;связью&nbsp;=<br><span class="Keyword" style="color:#0070FF">RELATED</span><span class="Parenthesis" style="color:#969696">&nbsp;(</span>&nbsp;'Dataset&nbsp;2'[Эпитет]&nbsp;<span class="Parenthesis" style="color:#969696">)</span><br>

![blog_009_screen_4] (https://kkadikin.ru/images/blog/blog_009_screen_4.jpg)

В результате указанного действия мы получили составной набор данных, где указано, например, что "Джек-рассел терьер собака Смайл молодец", а Йоркширский терьер песик Тедди умница :-)".

**<li>** При формировании визуального элемента результат аналогичен 1-му варианту.

![blog_009_screen_5] (https://kkadikin.ru/images/blog/blog_009_screen_5.jpg)


**Конструкции Lookupvalue:**

**<li>** Данная функция работает более хитрым образом, при этом, непосредственное наличие связей между данными для ее работы необязательно, поэтому, для чистоты эксперимента, настроенная ранее связь между "Dataset 1" и "Dataset 2" удалена:

![blog_009_screen_6] (https://kkadikin.ru/images/blog/blog_009_screen_6.jpg)

**<li>** Сначала необходимо указать столбец желаемого результата из присоединяемой таблицы, а затем - поле ключа для поиска необходимых данных в обоих наборах. Формула, позволяющая получить составной набор данных, выглядит следующим образом:

Эпитет&nbsp;-&nbsp;без&nbsp;связи&nbsp;=<br><span class="Keyword" style="color:#0070FF">LOOKUPVALUE</span><span class="Parenthesis" style="color:#969696">&nbsp;(</span>&nbsp;'Dataset&nbsp;2'[Эпитет];&nbsp;'Dataset&nbsp;2'[Питомец];&nbsp;'Dataset&nbsp;1'[Питомец]&nbsp;<span class="Parenthesis" style="color:#969696">)</span><br>

![blog_009_screen_7] (https://kkadikin.ru/images/blog/blog_009_screen_7.jpg)

**<li>** При формировании визуального элемента полученный результат аналогичен вариантам 1 и 2, но, из-за отсутствия связи между данными, на иллюстрации эти варианты стали неработоспособны:

![blog_009_screen_8] (https://kkadikin.ru/images/blog/blog_009_screen_8.jpg)

*Рвав=рвав, товарищи, даже если в связи с особенностями вашей модели связи построить нельзя -- это не повод для грусти!*


> *Держащий нос по ветру,*
>
> *Ваш Смайл*