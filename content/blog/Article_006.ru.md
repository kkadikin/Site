---
title: Дорога в облака
date: 2020-08-09
image: images/blog/art_006_foto.jpg
author: Smile
---

> *Рвав-рвав, неудержимый собака Смайл решил написать статью по "горячим следам"!*
>
> *Небольшие пояснения от хозяина:*
>
> **<li>** *Пес неудержим, так как "пятница, 13-е" не является помехой для творчества.*
>
> **<li>** *Статья появилась на сайте благодаря моему недавнему выступлению на on-line конференции Excel + Power BI 11-го сентября, которое имело аналогичное название. Короче, хитрый собака решил воспользоваться подвернувшейся возможностью :-Р*
>
> **<li>** *Ниже будет размещена пошаговая инструкция по установке шлюза Power BI Gateway, публикации отчета в службу Power BI Service (облако), и подключения источника данных для обеспечения процедуры обновления.*


> *Рвав-рвав, для того, чтобы воспользоваться всеми преимуществами работы в облаке (служба Power BI Service), необходимо иметь зарегистрированный тенант, и, например, лицензию Power BI Pro. Обозначенные моменты остаются за пределами данной публикации.*


**Установка шлюза Power BI Gateway:**

**<li>** Скачать файл установки Power BI Gateway можно с официального портала Microsoft по следующей ссылке:

[Power BI Gateway](https://powerbi.microsoft.com/ru-ru/gateway/)

> *Рвав-рвав, существует 2 режима установки шлюза: стандартный и персональный. Мы выберем 1-й вариант, и не только потому, что он работает с несколькими источниками данных для нескольких пользователей, но и из соображений удобства, так как данный вариант поддерживает обновление данных и по запросу, и по расписанию.* 

**<li>** Для скачивания выбранного варианта установки необходимо нажать кнопку "Скачать для установки в стандартном режиме".

**<li>** Первым шагом установки является запуск установочного файла «GatewayInstall.exe» от имени администратора.

**<li>** Далее нужно разрешить запускаемому приложению вносить изменения на вашем устройстве путем нажатия кнопки "Да".

**<li>** В появившемся окне установки предлагается проверить минимальные требования к программному обеспечению, указан путь для его установки, а также ссылки на условия использования и политику конфиденциальности: 

![art_006_screen_01](https://kkadikin.ru/images/blog/art_006_screen_1.jpg)

**<li>** Затем нужно подтвердить ознакомление с условиями использования и политикой конфиденциальности, проставив соответствующий флаг, и запустить установку программного обеспечения при помощи кнопки "Установить":

![art_006_screen_02](https://kkadikin.ru/images/blog/art_006_screen_2.jpg)

**<li>** Запуск процесса установки проиллюстрирован ниже:

![art_006_screen_03](https://kkadikin.ru/images/blog/art_006_screen_3.jpg)

**<li>** По завершении установки необходимо осуществить регистрацию шлюза, для этого требуется указать аккаунт электронной почты, на который производилась регистрация учетной записи Power BI, и войти при помощи кнопки "Вход":

![art_006_screen_04](https://kkadikin.ru/images/blog/art_006_screen_4.jpg)

**<li>** Далее производится авторизация в Microsoft Azure, в открывшемся окне предлагается выбрать нужную учетную запись, при этом, если у человека их несколько, и в списке нужной записи нет, необходимо нажать кнопку "+":

![art_006_screen_05](https://kkadikin.ru/images/blog/art_006_screen_5.jpg)

**<li>** После этого вводим логин учетной записи в Microsoft Azure, и нажимаем кнопку "Далее":

![art_006_screen_06](https://kkadikin.ru/images/blog/art_006_screen_6.jpg)

**<li>** Вводим пароль, и нажимаем кнопку «Войти»:

![art_006_screen_07](https://kkadikin.ru/images/blog/art_006_screen_7.jpg)

**<li>** После осуществления входа в систему для регистрации шлюза необходимо выбрать нужный вариант дальнейшего поведения регистрируемого шлюза – это может быть либо регистрация нового шлюза, либо какие-то действия с существующим шлюзом:

![art_006_screen_08](https://kkadikin.ru/images/blog/art_006_screen_8.jpg)

**<li>** Поскольку нам нужна регистрация нового шлюза и переключатель правильно установлен «по умолчанию», можно просто нажать кнопку «Далее».

**<li>** После осуществления входа в систему для регистрации шлюза необходимо ввести: название шлюза и ключ его восстановления (не терять, поскольку в случае утери придется все ставить заново), который может понадобиться в дальнейшем для частичного изменения настроек шлюза. Также, в случае необходимости, здесь присутствует возможность объединения шлюзов в кластер, и изменения региона подключения шлюза:

![art_006_screen_09](https://kkadikin.ru/images/blog/art_006_screen_9.jpg)

**<li>** После заполнения необходимых параметров нужно нажать кнопку "Настроить:

![art_006_screen_10](https://kkadikin.ru/images/blog/art_006_screen_10.jpg)

**<li>** На этом установка завершена, но в качестве завершающего шага выводится информационная форма с расширенными настройками шлюза:

![art_006_screen_11](https://kkadikin.ru/images/blog/art_006_screen_11.jpg)

> *Рвав-рвав, в случае, если настройки "по умолчанию" вас устраивают, а любопытство -- отсутствует, можно нажать кнопку "Закрыть", и выдохнуть, поскольку установка завершена.*


**Проверка результата установки шлюза:**

**<li>** Если все прошло успешно, в вашем облачном сервисе появится установленный шлюз, с валидным (зеленым) флагом о том, что шлюз в сети (по кнопке "Настройки" в виде шестеренки можно перейти в блок "Управление шлюзами"):

![art_006_screen_11](https://kkadikin.ru/images/blog/art_006_screen_11.jpg)


**Публикация отчета в облако:**

**<li>** Чтобы выполнить все обозначенные цели данной публикации, а именно подключить источник данных в облаке, нам необходимо опубликовать какой-нибудь отчет. Публикацию отчета можно осуществить, например, из программы Power BI Desktop, при помощи кнопки "Publish" ("Опубликовать"), расположенной на закладке "Home" ("Главная"):

![art_006_screen_12](https://kkadikin.ru/images/blog/art_006_screen_12.jpg)


**Подключение нового источника данных:**

**<li>** При публикации отчета в облаке происходит не только "перемещение" самого отчета в облачный сервис, но также, и набора данных, которые использует публикуемый отчет. Для обновления данных в облаке, как уже говорилось выше, нужно подключить через установленный шлюз, используемый отчетом источник. В нашем примере источником является файл Excel, имеющий следующие данные:

![art_006_screen_13](https://kkadikin.ru/images/blog/art_006_screen_13.jpg)

**<li>** Для подключения нового источника нужно перейти в блок "Управление шлюзами", и нажать ссылку "Добавить источники данных для использования шлюза":

![art_006_screen_14](https://kkadikin.ru/images/blog/art_006_screen_14.jpg)

**<li>** После этого в форме откроются дополнительные поля «Имя источника данных» и «Тип источника данных», при этом, в зависимости от заполнения второго поля, ниже открывается комплект дополнительных полей, который для источника типа "File" ("Файл") выглядит следующим образом:

![art_006_screen_15](https://kkadikin.ru/images/blog/art_006_screen_15.jpg)

**<li>** После заполнения всех настроек, необходимо нажать кнопку "Добавить", и, если настройки источника корректны, появится валидный (зеленый) флаг с сообщением о том, что соединение установлено:

![art_006_screen_16](https://kkadikin.ru/images/blog/art_006_screen_16.jpg)

**<li>** Последним шагом является сопоставление источника данных с набором данных, которое осуществляется в форме подключения шлюза. 

Путь: Кнопка "Настройки" в виде шестиренки -> Блок "Настройки" -> Закладка "Наборы данных" -> Выбор нужного набора данных по имени -> Блок "Подключение шлюза" -> Заполнение поля "Сопоставлен с":

![art_006_screen_17](https://kkadikin.ru/images/blog/art_006_screen_17.jpg)


> *Рвав-рвав, наконец-то все, собака Смайл уходит спать с чувством выполненного долга...*
>
> *Ваш Смайл*