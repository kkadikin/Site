---
title: Дорога в облака
date: 2019-09-13
image: images/blog/art_006_foto.jpg
author: Smile
---

> *Рвав-рвав, неудержимый собака Смайл решил написать статью по "горячим следам"!*
>
> *Небольшие пояснения от хозяина:*
>
> **<li>** *Пес неудержим, так как "пятница, 13-е", не является помехой для творчества.*
>
> **<li>** *Статья появилась на сайте благодаря моему недавнему выступлению на on-line конференции Excel + Power BI 11-го сентября, которое имело аналогичное название. Короче, хитрый собака решил воспользоваться подвернувшейся возможностью :-Р*
>
> **<li>** *Ниже будет размещена пошаговая инструкция по установке шлюза Power BI Gateway, публикации отчета в службу Power BI Service (облако), и подключения источника данных для обеспечения процедуры обновления.*


> *Рвав-рвав, для того, чтобы воспользоваться всеми преимуществами работы в облаке (служба Power BI Service), необходимо иметь зарегистрированный тенант, и, например, лицензию Power BI Pro. Обозначенные моменты остаются за пределами данной публикации.*


**Установка шлюза Power BI Gateway:**

**<li>** Скачать файл установки Power BI Gateway можно с официального портала Microsoft по кнопке "СКАЧАТЬ ШЛЮЗ", а для начала -- жмем ниже:

[Power BI Gateway](https://powerbi.microsoft.com/ru-ru/gateway/)

**<li>** Далее следует запустить установку программы с правами администратора

**<li>** Начальным шагом устанвки является вшитое информационное сообщение, ознакомившись с которым необходимо нажать кнопку "Далее":

![art_006_screen_01](https://kkadikin.ru/images/blog/art_006_screen_01.jpg)

**<li>** Затем предлагается выбрать один из 2-х вариантов установки шлюза, мы выберем "On-premises data gateway", и не только потому, что он работает с несколькими источниками данных для нескольких пользователей, но и просто из соображений удобства, так как только в этом варианте поддерживается обновление данных и по запросу, и по расписанию. Поэтому смело жмем кнопку "Далее", оставляя переключатель на этом шаге в положении "по умолчанию":

![art_006_screen_02](https://kkadikin.ru/images/blog/art_006_screen_02.jpg)

**<li>** Следующий шаг -- это своеобразное тестирование / подготовка к установке, тут необходимо дождаться окончания процедуры, как вы понимаете, и только затем нажимать кнопку "Далее":

![art_006_screen_03](https://kkadikin.ru/images/blog/art_006_screen_03.jpg)

**<li>** После этого пользователю предлагается скорректировать, в случае необходимости, место установки программы, а также ознакомиться с условиями использования и соглашением о конфиденциальности. Ознакомление должно быть подтверждено соответствующим флагом, после установки которого, становится доступной для нажатия кнопка "Установить":

![art_006_screen_04](https://kkadikin.ru/images/blog/art_006_screen_04.jpg)

**<li>** Запуск процесса установки проиллюстрирован ниже:

![art_006_screen_05](https://kkadikin.ru/images/blog/art_006_screen_05.jpg)

**<li>** По завершении установки необходимо осуществить регистрацию шлюза, для этого требуется указать аккаунт электронной почты, на который производилась регистрация учетной записи Power BI, и войти при помощи кнопки "Вход":

![art_006_screen_06](https://kkadikin.ru/images/blog/art_006_screen_06.jpg)

**<li>** Далее производится авторизация в Microsoft Azure, в открывшемся окне предлагается выбрать нужную учетную запись:

![art_006_screen_07](https://kkadikin.ru/images/blog/art_006_screen_07.jpg)

**<li>** Указать пароль:

![art_006_screen_08](https://kkadikin.ru/images/blog/art_006_screen_08.jpg)

**<li>** После осуществления входа в систему для регистрации шлюза необходимо ввести: название шлюза и ключ его восстановления (не терять, поскольку в случае утери придется все ставить заново), который может понадобиться в дальнейшем для частичного изменения настроек шлюза. Также, в случае необходимости, здесь присутствует возможность объединения шлюзов в кластер, и изменения региона подключения шлюза: 

![art_006_screen_09](https://kkadikin.ru/images/blog/art_006_screen_09.jpg)

После заполнения необходимых параметров нужно нажать кнопку "Настройка".

**<li>** На этом установка завершена, но в качестве завершающего шага пользователю выводится информационная форма с расширенными настройками шлюза:

![art_006_screen_10](https://kkadikin.ru/images/blog/art_006_screen_10.jpg)


**Проверка результата установки шлюза:**

**<li>** Если все прошло успешно, в вашем облачном сервисе появится установленный шлюз, с валидным (зеленым) флагом о том, что шлюз в сети (по кнопке "Настройки" в виде шестиренки можно перейти в блок "Управление шлюзами"):

![art_006_screen_11](https://kkadikin.ru/images/blog/art_006_screen_11.jpg)


**Публикация отчета в обдако:**

**<li>** Чтобы выполнить все обозначенные цели данной публикации, а именно подключить источник данных в облаке, нам необходимо опубликовать какой-нибудь отчет. Публикацию отчета можно осуществить, например, из программы Power BI Desktop, при помощи кнопки "Publish" ("Опубликовать"), расположенной на закладке "Home" ("Главная"):

![art_006_screen_12](https://kkadikin.ru/images/blog/art_006_screen_12.jpg)


**Подключение нового источника данных**

**<li>** При публикации отчета в облаке происходит не только "перемещение" самого отчета в облачный сервис, но также, и набора данных, которые использует публикуемый отчет. Для обновления данных в облаке, как уже говорилось выше, нужно подключить через установленный шлюз используемый отчетом источник. В нашем примере источником является файл Excel, имеющий следующие данные:

![art_006_screen_13](https://kkadikin.ru/images/blog/art_006_screen_13.jpg)

**<li>** Для подключения нового источника ножно перейти в блок "Управление шлюзами", и нажать ссылку "Добавить источники данных для использования шлюза":

![art_006_screen_14](https://kkadikin.ru/images/blog/art_006_screen_14.jpg)

**<li>** После этого в форме откроются дополнительные поля "Имя источника данных" и "Тип источника данных", при этом, в зависимости от заполнения второго поля, ниже открывается комплект дополнительных полей, который для источника типа "Файл" выглядит следующим образом:

![art_006_screen_15](https://kkadikin.ru/images/blog/art_006_screen_15.jpg)

**<li>** После заполнения всех настроек, необходимо нажать кнопку "Добавить", и, если настройки источника корректны, появится валидный (зеленый) флаг с сообщением о том, что соединение установлено:

![art_006_screen_16](https://kkadikin.ru/images/blog/art_006_screen_16.jpg)

**<li>** Последнним шагом является сопоставление источника данных с набором данных, которое осуществляется в форме подключения шлюза, путь:

Кнопка "Настройки" в виде шестиренки -> Блок "Настройки" -> Закладка "Наборы данных" -> Выбор нужного набора данных по имени -> Блок "Подключение шлюза" -> Заполнение поля "Сопоставлен с:" )

![art_006_screen_17](https://kkadikin.ru/images/blog/art_006_screen_17.jpg)


> *Рвав-рвав, наконец-то все, собака Смайл уходит спать с чувством выполненного долга...*
>
> *Ваш Смайл*